{% extends "_base.html" %}

{% block title %}Lista de produtos{% endblock title %}

{% block content %}

    <h1>Lista de produtos</h1>

    <a href="{% url "products:create" %}">Novo produto</a>

    <form method="get">
        <input type="text" name="q" value="{{ request.GET.q }}">
    </form>

    <ul>
        {% for product in page_obj %}
            <li>
                {{ product.name }}:
                {% if product.promotional_value %}
                    <s>R$ {{ product.value }}</s>
                    R$ {{ product.promotional_value }}
                {% else %}
                    R$ {{ product.value }} -
                {% endif %}
                <a href="{% url "products:update" product.slug %}">Editar</a> -
                <a href="{% url "products:delete" product.id %}">Excluir</a>
            </li>
        {% empty %}
            <li>Nenhum produto cadastrado.</li>
        {% endfor %}
    </ul>

    {% include "partials/_pagination.html" %}

{% endblock content %}